" Vimperatorrc

" vim: set ft=vim:

" ==================
" Plugins
" ==================
" Plugin loader
"let g:plugin_loader_roots="~/.vimperator/vimperator-plugins"
"let g:plugin_loader_plugins='stella,copy,carent-hint'

" copy.js
"javascript <<EOM
"liberator.globalVariables.copy_templates = [
"  {label:'Url', value:'%URL%'},
"  {label:'TitleAndUrl', value:'%TITLE% %URL%'},
"  {label:'hatena', value:'[%URL%:title=%TITLE%]'},
"  {label:'wiki', value:'[[%TITLE%|%URL%]]'},
"  {label:'redmine', value:'"%TITLE%":%URL%'},
"  {label:'Title', value:'%TITLE%'},
"  {label:'HTML', value:'<a href=%URL%>%TITLE%</a>'} 
"]
"EOM

"====================
" options
"====================
colorscheme black

" Do not go to insert mode automatically.
set focuscontent

" Do not use 'vimperator' as a title string.
set titlestring="Firefox"

" Animation off.
set animations=false

" Do not use some chars('i') as a hintchar.
set hintchars=1234567890qwertyuopasdfghjklzxcvbnm

" Ignore case in search patterns.
set ignorecase

" Use 'Firefox location bar entries' and 'open tabs' for completion.
set complete=lt

" Maximum number of items to display at once in a listing.
set maxitems=10

" Highligh previous search pattern matches.
set hlsearch

" Open :addons, :downloads, :extoptions, :help, :javascript and :pref results in a newtab.
set newtab=all

" Editor
set editor='bash -lc "mvim -f \$*" mvim '

"====================
" Firefox preferences
"====================
" Appearance of bars.
set gui=addons,nobookmarks,nomenu,nonavigation,tabs

" Set google as homepage
set! browser.startup.homepage=https://www.google.co.jp/

" Show windows and tabs from last time at startup.
set! browser.startup.page=3

" Show speeddial as a newtab.
set! browser.newtab.url=chrome://speeddial/content/speeddial.xul
"set! browser.newtab.url=about:newtab
"
" Do not check if Firefox is default browser.
set! browser.shell.checkDefaultBrowser=false

"====================
" Mappings
"====================
" Reload .vimperatorrc(this file).
nnoremap <C-r> :source ~/.vimperatorrc<CR>

" More quick cursor motion
nnoremap h 5h
nnoremap j 5j
nnoremap k 5k
nnoremap l 5l

" Back, forward and jump pages through histores.
nnoremap <C-l> :forward<CR>
nnoremap <C-h> :back<CR>
nnoremap <C-j> :jumps<CR>;o

" Show undo history.
nnoremap U :undo<Space>

" Halt loading pages.
nnoremap x :stop<CR>
nnoremap X :stopall<CR>

" Quit Firefox when no tab exists with d key.
" If other tabgroups exists, you must kill them with 'gtd', or 'ZZ' to save
" the current groups and quit.
nnoremap d :q<CR>

" View page source (I cannot remember gf).
nnoremap vs gf
nnoremap gf <Nop>

" Tabgroups
" Disable gt map (use <C-n> to change tab).
map gt <Nop>
" list
nnoremap gtl :tabgroups<Space>list<CR>
" add
nnoremap gta :tabgroups<Space>add<CR>
" delete
nnoremap gtd :tabgroups<Space>remove<CR>
" move the current tab to other group
nnoremap gtm :tabgroups<Space>stash<Space>
" add a tab from other group
nnoremap gtp :tabgroups<Space>pull<Space>
" switch
nnoremap gts :tabgroups<Space>switch<Space>
" show tab group view
nnoremap gto <C-S-e>

" Quick marks 
" Qmarks that depends on computer are defined in .vimperatorrc.local
qmark g https://www.google.co.jp/
qmark m https://mail.google.com/mail/
qmark c https://www.google.com/calendar/render

" Delete in insert mode
inoremap <C-b> <BS>
inoremap <C-d> <DEL>

" cursor motion in insert mode
inoremap <C-h> <Left>
inoremap <C-j> <Down>
inoremap <C-k> <Up>
inoremap <C-l> <Right>

" Load local settings.
source! ~/.vimperatorrc.local

